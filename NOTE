#make download list
https://developer.mozilla.org/Special:Sitemap?language=ja
var arr = $x('/html/body/div/div[2]/div/div[3]/div[2]/div/ul/li/ul/li[2]/ul/li[79]')[0].getElementsByTagName("a");
var df = document.createDocumentFragment();
for (var i = 0; i < arr.length; i++) {
  var p = document.createElement("p");
  p.appendChild(document.createTextNode(arr[i].href));
  df.appendChild(p);
}
document.body.appendChild(df);

#download them
wget -p --convert-links -nc --html-extension -i jsref.list

#process 1
find developer.mozilla.org/en/ developer.mozilla.org/ja/ -name "*.html" | xargs -n 100 -P 0 gosh offline.scm -v

#process 2
find out/developer.mozilla.org/en/ out/developer.mozilla.org/ja/ -name "*.html" | xargs -n 100 -P 0 gosh mergelang.scm -v 

#process 3
gosh includes.scm | xargs -n 100 -P 0 gosh xml2texi.scm -v

#process 4
gosh includes.scm -t > includes.texi

#process 5
makeinfo ultimate.texi 2> err

#process 6 (if an 'err' file has contents)
Read an 'err' file and edit a notfound.scm.
Repeat from process 3.

#output html


#output dvi
find includes.texi ultimate.texi texi/ -name "*.texi" | xargs gosh utf8_to_eucjp.scm
edit eucjp_ultimate.texi, eucjp_includes.texi
TEX=ptex texi2dvi -t "@afourpaper" eucjp_ultimate.texi

#output pdf
dvipdfmx eucjp_ultimate.dvi

#output chm
texi2html --init-file chm.init ultimate.texi
